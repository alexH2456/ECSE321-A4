
// Apply the java plugin to add support for Java
apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'application.CompApp'

sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
    test {
        java {
            srcDir 'test'
        }
    }
}

// In this section you declare where to find the dependencies of your project
repositories {
    jcenter()
}

// In this section you declare the dependencies for your production and test code
dependencies {
    compile 'junit:junit:4.12'
    testCompile 'junit:junit:4.12'
}

task compile(type: JavaCompile, dependsOn: 'testCompile') {
    source = sourceSets.main.java
    destinationDir = file('build/classes')
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
    dependencyCacheDir = file("${buildDir}/dependency-cache")
    classpath = files('build/classess')   
}

task testCompile(type: JavaCompile) {
    source = sourceSets.test.java
    destinationDir = file('build/classes/test')
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
    dependencyCacheDir = file("${buildDir}/dependency-cache")
    classpath = files('build/classes/test')
}

run {
    // Uses application plugin to run, default implementation works
}

jar {
    manifest {
        attributes 'Main-Class': mainClassName
    }
    destinationDir = file('distributable')
}

clean {
    delete file('distributable')
    delete file('bin')
}